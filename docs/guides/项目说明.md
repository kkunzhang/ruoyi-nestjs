# NestJS é¡¹ç›®ç»“æ„å·²åˆ›å»ºå®Œæˆ âœ…

## ğŸ‰ é¡¹ç›®åˆå§‹åŒ–æˆåŠŸ

å·²ä¸ºä½ åˆ›å»ºäº†å®Œæ•´çš„ NestJS é¡¹ç›®æ–‡ä»¶ç»“æ„ï¼Œå¯ä»¥å¼€å§‹è¿ç§» RuoYi-Vue çš„ Java ä»£ç äº†ï¼

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•

### é…ç½®æ–‡ä»¶
- âœ… `package.json` - é¡¹ç›®ä¾èµ–é…ç½®ï¼ˆåŒ…å«æ‰€æœ‰å¿…éœ€çš„ npm åŒ…ï¼‰
- âœ… `tsconfig.json` - TypeScript ç¼–è¯‘é…ç½®ï¼ˆå·²é…ç½®è·¯å¾„åˆ«åï¼‰
- âœ… `nest-cli.json` - NestJS CLI é…ç½®
- âœ… `.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹
- âœ… `.gitignore` - Git å¿½ç•¥æ–‡ä»¶é…ç½®
- âœ… `.prettierrc` - ä»£ç æ ¼å¼åŒ–é…ç½®
- âœ… `.eslintrc.js` - ä»£ç æ£€æŸ¥é…ç½®

### æ•°æ®åº“é…ç½®
- âœ… `prisma/schema.prisma` - Prisma æ•°æ®åº“æ¨¡å‹å®šä¹‰æ–‡ä»¶

### æ ¸å¿ƒåº”ç”¨æ–‡ä»¶
- âœ… `src/main.ts` - åº”ç”¨å…¥å£ï¼ˆå·²é…ç½® Swaggerã€å…¨å±€éªŒè¯ç®¡é“ï¼‰
- âœ… `src/app.module.ts` - æ ¹æ¨¡å—
- âœ… `src/app.controller.ts` - æ ¹æ§åˆ¶å™¨
- âœ… `src/app.service.ts` - æ ¹æœåŠ¡

### Domain å±‚ï¼ˆå®ä½“å±‚ï¼‰
- âœ… `src/domain/` - å®ä½“å±‚ç›®å½•
  - `entities/` - Prisma å®ä½“ç±»
  - `dto/request/` - è¯·æ±‚ DTO
  - `dto/response/` - å“åº” DTO
  - `vo/` - è§†å›¾å¯¹è±¡

### Mapper å±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰
- âœ… `src/mapper/` - æ•°æ®è®¿é—®å±‚ç›®å½•
  - `prisma/` - Prisma æŸ¥è¯¢å°è£…
  - `sql/` - å¤æ‚ SQL è¯­å¥

### Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
- âœ… `src/service/` - ä¸šåŠ¡é€»è¾‘å±‚ç›®å½•
  - `system/` - ç³»ç»Ÿç®¡ç†æ¨¡å—
  - `monitor/` - ç³»ç»Ÿç›‘æ§æ¨¡å—

### Controller å±‚ï¼ˆæ¥å£å±‚ï¼‰
- âœ… `src/controller/` - æ¥å£å±‚ç›®å½•
  - `system/` - ç³»ç»Ÿç®¡ç†æ¥å£
  - `monitor/` - ç³»ç»Ÿç›‘æ§æ¥å£

### Common å±‚ï¼ˆé€šç”¨èƒ½åŠ›ï¼‰

#### æ•°æ®åº“
- âœ… `src/common/prisma/prisma.service.ts` - Prisma æœåŠ¡
- âœ… `src/common/prisma/prisma.module.ts` - Prisma æ¨¡å—

#### åˆ†é¡µåŠŸèƒ½
- âœ… `src/common/pagination/dto/page-query.dto.ts` - åˆ†é¡µæŸ¥è¯¢å‚æ•°
- âœ… `src/common/pagination/dto/page-result.dto.ts` - åˆ†é¡µç»“æœ

#### ç»Ÿä¸€å“åº”
- âœ… `src/common/response/ajax-result.ts` - ç»Ÿä¸€å“åº”æ ¼å¼ï¼ˆå¯¹åº” RuoYi çš„ AjaxResultï¼‰

#### æƒé™è®¤è¯
- âœ… `src/common/auth/jwt.strategy.ts` - JWT ç­–ç•¥
- âœ… `src/common/auth/jwt-auth.guard.ts` - JWT è®¤è¯å®ˆå«

#### æ—¥å¿—ç³»ç»Ÿ
- âœ… `src/common/logger/logger.service.ts` - æ—¥å¿—æœåŠ¡
- âœ… `src/common/logger/logger.module.ts` - æ—¥å¿—æ¨¡å—

#### è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨
- âœ… `src/common/filters/http-exception.filter.ts` - å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨
- âœ… `src/common/interceptors/transform.interceptor.ts` - å“åº”è½¬æ¢æ‹¦æˆªå™¨

#### è£…é¥°å™¨
- âœ… `src/common/decorators/public.decorator.ts` - å…¬å¼€æ¥å£è£…é¥°å™¨
- âœ… `src/common/decorators/roles.decorator.ts` - è§’è‰²è£…é¥°å™¨
- âœ… `src/common/decorators/permissions.decorator.ts` - æƒé™è£…é¥°å™¨
- âœ… `src/common/decorators/current-user.decorator.ts` - å½“å‰ç”¨æˆ·è£…é¥°å™¨
- âœ… `src/common/decorators/api-paginated-response.decorator.ts` - åˆ†é¡µå“åº”è£…é¥°å™¨

#### å®ˆå«
- âœ… `src/common/guards/roles.guard.ts` - è§’è‰²å®ˆå«
- âœ… `src/common/guards/permissions.guard.ts` - æƒé™å®ˆå«

#### å¸¸é‡
- âœ… `src/common/constants/http-status.constant.ts` - HTTP çŠ¶æ€ç å¸¸é‡

#### å·¥å…·ç±»
- âœ… `src/common/utils/bcrypt.util.ts` - å¯†ç åŠ å¯†å·¥å…·
- âœ… `src/common/utils/date.util.ts` - æ—¥æœŸå¤„ç†å·¥å…·
- âœ… `src/common/utils/string.util.ts` - å­—ç¬¦ä¸²å¤„ç†å·¥å…·

### æ–‡æ¡£
- âœ… `README.md` - é¡¹ç›®è¯´æ˜æ–‡æ¡£
- âœ… `QUICK_START.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… `PROJECT_STRUCTURE.md` - è¯¦ç»†æ–‡ä»¶ç»“æ„è¯´æ˜
- âœ… `MIGRATION_GUIDE.md` - Java åˆ° NestJS è¿ç§»æŒ‡å—

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. å®‰è£…ä¾èµ–
```bash
cd "/Users/mac/Desktop/project/ruoyi 2/nestRuoyi"
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯
# DATABASE_URL="mysql://root:ä½ çš„å¯†ç @localhost:3306/ruoyi"
```

### 3. å¼€å§‹è¿ç§»

æŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿ç§» Java ä»£ç ï¼š

#### ç¬¬ä¸€æ­¥ï¼šDomainï¼ˆå®ä½“ï¼‰
1. æä¾› Java çš„å®ä½“ç±»ï¼ˆEntityï¼‰
2. æˆ‘ä¼šå¸®ä½ è½¬æ¢ä¸º Prisma Schema
3. åˆ›å»ºå¯¹åº”çš„ TypeScript DTO

#### ç¬¬äºŒæ­¥ï¼šMapperï¼ˆæ•°æ®è®¿é—®ï¼‰
1. æä¾› Java çš„ Mapper æ¥å£å’Œ XML
2. æˆ‘ä¼šå¸®ä½ è½¬æ¢ä¸º Prisma æŸ¥è¯¢

#### ç¬¬ä¸‰æ­¥ï¼šServiceï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
1. æä¾› Java çš„ Service ç±»
2. æˆ‘ä¼šå¸®ä½ è½¬æ¢ä¸º NestJS Service

#### ç¬¬å››æ­¥ï¼šControllerï¼ˆæ¥å£ï¼‰
1. æä¾› Java çš„ Controller ç±»
2. æˆ‘ä¼šå¸®ä½ è½¬æ¢ä¸º NestJS Controller
3. ç¡®ä¿ URL å’Œå‚æ•°æ ¼å¼ä¸ Java ç‰ˆæœ¬ä¸€è‡´

#### ç¬¬äº”æ­¥ï¼šé€šç”¨èƒ½åŠ›
1. æ·»åŠ æƒé™éªŒè¯
2. æ·»åŠ æ—¥å¿—è®°å½•
3. å®Œå–„å¼‚å¸¸å¤„ç†

## ğŸ“š æ ¸å¿ƒç‰¹æ€§

### âœ… å·²å®ç°çš„åŠŸèƒ½

1. **ç»Ÿä¸€å“åº”æ ¼å¼**
   - `AjaxResult` ç±»ï¼ˆå¯¹åº” RuoYiï¼‰
   - è‡ªåŠ¨åŒ…è£…å“åº”æ•°æ®

2. **åˆ†é¡µåŠŸèƒ½**
   - `PageQueryDto` - åˆ†é¡µæŸ¥è¯¢å‚æ•°
   - `PageResultDto` - åˆ†é¡µç»“æœï¼ˆå¯¹åº” RuoYi çš„ TableDataInfoï¼‰

3. **æƒé™è®¤è¯**
   - JWT è®¤è¯
   - è§’è‰²æƒé™æ§åˆ¶
   - æƒé™æ ‡è¯†æ§åˆ¶

4. **å¼‚å¸¸å¤„ç†**
   - å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨
   - ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼

5. **æ—¥å¿—ç³»ç»Ÿ**
   - æ—¥å¿—æœåŠ¡ï¼ˆå¯æ‰©å±•ä¸ºæ•°æ®åº“æ—¥å¿—ï¼‰

6. **æ•°æ®éªŒè¯**
   - class-validator è‡ªåŠ¨éªŒè¯
   - è‡ªå®šä¹‰éªŒè¯è§„åˆ™

7. **API æ–‡æ¡£**
   - Swagger è‡ªåŠ¨ç”Ÿæˆ
   - è®¿é—®åœ°å€ï¼šhttp://localhost:3000/api-docs

## ğŸ¯ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: NestJS 10.3
- **è¯­è¨€**: TypeScript 5.3ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
- **ORM**: Prisma 5.8
- **æ•°æ®åº“**: MySQL
- **è®¤è¯**: JWT + Passport
- **éªŒè¯**: class-validator + class-transformer
- **æ–‡æ¡£**: Swagger (@nestjs/swagger)

## ğŸ“– ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [README.md](./README.md) | é¡¹ç›®å®Œæ•´è¯´æ˜ |
| [QUICK_START.md](./QUICK_START.md) | å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼ˆæ¨èå…ˆçœ‹è¿™ä¸ªï¼‰|
| [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md) | è¯¦ç»†çš„æ–‡ä»¶ç»“æ„è¯´æ˜ |
| [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) | Java åˆ° NestJS è¿ç§»æŒ‡å— |

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **å…ˆé˜…è¯»æ–‡æ¡£**
   - ä» `QUICK_START.md` å¼€å§‹
   - äº†è§£é¡¹ç›®ç»“æ„å’Œè¿ç§»æµç¨‹

2. **é€æ­¥è¿ç§»**
   - ä¸€æ¬¡è¿ç§»ä¸€ä¸ªæ¨¡å—
   - å»ºè®®ä»ç”¨æˆ·ç®¡ç†æ¨¡å—å¼€å§‹

3. **ä¿æŒä¸€è‡´æ€§**
   - URL è·¯å¾„ä¸ Java ç‰ˆæœ¬ä¸€è‡´
   - è¯·æ±‚å‚æ•°ä¸ Java ç‰ˆæœ¬ä¸€è‡´
   - å“åº”æ ¼å¼ä¸ Java ç‰ˆæœ¬ä¸€è‡´

4. **å……åˆ†æµ‹è¯•**
   - ä½¿ç”¨ Swagger æµ‹è¯•æ¥å£
   - ä¸å‰ç«¯è”è°ƒéªŒè¯

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run start:dev

# ç”Ÿæˆ Prisma Client
npm run prisma:generate

# æ•°æ®åº“è¿ç§»
npm run prisma:migrate

# å¯è§†åŒ–æ•°æ®åº“ç®¡ç†
npm run prisma:studio

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥
npm run lint
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**ï¼šå¿…é¡»åˆ›å»º `.env` æ–‡ä»¶
2. **æ•°æ®åº“**ï¼šç¡®ä¿ MySQL å·²å¯åŠ¨
3. **Node ç‰ˆæœ¬**ï¼šå»ºè®®ä½¿ç”¨ Node.js 18+
4. **ä¾èµ–å®‰è£…**ï¼šé¦–æ¬¡è¿è¡Œéœ€è¦ `npm install`

## ğŸŠ å‡†å¤‡å°±ç»ª

é¡¹ç›®ç»“æ„å·²ç»å®Œå…¨æ­å»ºå¥½äº†ï¼ç°åœ¨ä½ å¯ä»¥ï¼š

1. å®‰è£…ä¾èµ–ï¼š`npm install`
2. é…ç½®ç¯å¢ƒï¼šåˆ›å»º `.env` æ–‡ä»¶
3. æä¾› Java ä»£ç ï¼Œå¼€å§‹è¿ç§»ç¬¬ä¸€ä¸ªæ¨¡å—

**å»ºè®®ä»ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆsys_userï¼‰å¼€å§‹è¿ç§»ï¼**

---

æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶æä¾› Java ä»£ç ï¼Œæˆ‘ä¼šå¸®ä½ å®Œæˆè¿ç§»ï¼ğŸš€



